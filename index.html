<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Media Player PRO ‚Ä¢ Playlist + Search + Lyrics</title>
  <style>
    :root{
      --bg:#0b0f14; --card:#111824; --card2:#0f1520; --text:#e9eef6; --muted:#a9b4c3;
      --line:rgba(255,255,255,.08);
      --accent:#ff5a3a; --accent2:#ffb84a;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:radial-gradient(1100px 450px at 20% -10%, rgba(255,90,58,.18), transparent 55%),
                   radial-gradient(900px 450px at 90% 0%, rgba(255,184,74,.16), transparent 55%),
                   var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    a{color:inherit}
    .wrap{max-width:1200px; margin:0 auto; padding:18px}
    .topbar{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      margin:10px 0 14px;
    }
    .title{
      display:flex; flex-direction:column; gap:4px;
    }
    .title h1{margin:0; font-size:20px; letter-spacing:.2px}
    .title small{color:var(--muted)}
    .tabs{
      display:flex; gap:8px; align-items:center;
      background:rgba(255,255,255,.03);
      border:1px solid var(--line);
      border-radius:999px;
      padding:6px;
    }
    .tab{
      border:0; cursor:pointer;
      color:var(--muted);
      background:transparent;
      padding:8px 12px;
      border-radius:999px;
      font-weight:700;
      letter-spacing:.2px;
    }
    .tab.active{
      color:#111;
      background:linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 10px 22px rgba(255,90,58,.15);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:14px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .cardHeader{
      padding:14px 14px 10px;
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      border-bottom:1px solid var(--line);
      background:rgba(0,0,0,.12);
    }
    .cardHeader .left{
      display:flex; flex-direction:column; gap:3px;
    }
    .cardHeader .left b{font-size:14px}
    .cardHeader .left span{font-size:12px; color:var(--muted)}
    .badge{
      font-size:11px; font-weight:900;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--muted);
      white-space:nowrap;
    }

    /* Player */
    .playerBox{padding:14px}
    .ytWrap{
      width:100%;
      aspect-ratio: 16/9;
      background:#000;
      border-radius:14px;
      overflow:hidden;
      border:1px solid var(--line);
    }
    iframe{width:100%; height:100%; border:0}

    .nowRow{
      margin-top:10px;
      display:flex; flex-wrap:wrap; gap:8px; align-items:center; justify-content:space-between;
    }
    .pillRow{display:flex; flex-wrap:wrap; gap:8px}
    .pill{
      font-size:12px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--muted);
      display:flex; gap:6px; align-items:center;
      user-select:none;
    }
    .pill strong{color:var(--text)}
    .btn{
      cursor:pointer;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:9px 11px;
      border-radius:12px;
      font-weight:800;
      transition:.15s transform ease, .15s background ease;
      user-select:none;
    }
    .btn:hover{transform:translateY(-1px); background:rgba(255,255,255,.06)}
    .btn:active{transform:translateY(0px)}
    .btn.on{
      border-color:rgba(255,90,58,.4);
      background:rgba(255,90,58,.12);
    }

    .controls{
      margin-top:10px;
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    .row{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    .slider{
      width:100%;
      accent-color: var(--accent);
      cursor:pointer;
    }
    .timeRow{
      display:flex; justify-content:space-between;
      color:var(--muted); font-size:12px;
      margin-top:-4px;
    }

    /* Lyrics */
    .lyrics{
      margin-top:12px;
      border-top:1px solid var(--line);
      padding-top:12px;
    }
    .lyricsTop{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      margin-bottom:8px;
    }
    .seg{
      display:flex; gap:6px;
      background:rgba(255,255,255,.03);
      border:1px solid var(--line);
      border-radius:999px;
      padding:5px;
    }
    .seg button{
      border:0; cursor:pointer;
      padding:7px 10px;
      border-radius:999px;
      background:transparent;
      color:var(--muted);
      font-weight:900;
    }
    .seg button.active{
      background:linear-gradient(90deg, var(--accent), var(--accent2));
      color:#111;
    }
    .lyricsBox{
      white-space:pre-wrap;
      max-height:220px;
      overflow:auto;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.15);
      color:#dbe6f4;
      line-height:1.55;
      font-size:14px;
    }
    .lyricsHint{
      margin-top:8px;
      font-size:12px;
      color:var(--muted);
    }

    /* Playlist */
    .playlistBox{padding:14px}
    .searchRow{
      display:flex; gap:8px; align-items:center;
      margin-bottom:10px;
    }
    .search{
      flex:1;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--text);
      outline:none;
    }
    .playlistScroll{
      max-height: 560px;
      overflow:auto;
      padding-right:6px;
    }
    .item{
      display:grid;
      grid-template-columns: 84px 1fr auto;
      gap:10px;
      align-items:center;
      padding:10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.06);
      background:rgba(255,255,255,.02);
      margin-bottom:8px;
      cursor:pointer;
      transition:.15s transform ease, .15s background ease, .15s border-color ease;
    }
    .item:hover{transform:translateY(-1px); background:rgba(255,255,255,.04)}
    .item.active{
      border-color:rgba(255,90,58,.35);
      background:linear-gradient(90deg, rgba(255,90,58,.18), rgba(255,184,74,.12));
    }
    .thumb{
      width:84px; height:48px; border-radius:10px; overflow:hidden;
      border:1px solid var(--line);
      background:#000;
      flex:0 0 auto;
    }
    .thumb img{width:100%; height:100%; object-fit:cover; display:block}
    .meta{display:flex; flex-direction:column; gap:4px; min-width:0}
    .meta b{
      font-size:14px; line-height:1.25;
      overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
    }
    .meta small{
      color:var(--muted);
      overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
    }
    .right{
      display:flex; flex-direction:column; align-items:flex-end; gap:6px;
      color:var(--muted);
      font-size:12px;
    }
    .tag{
      font-size:11px; font-weight:900;
      padding:5px 9px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      white-space:nowrap;
    }
    .mini{
      font-size:11px;
      opacity:.9;
      white-space:nowrap;
    }

    /* Scrollbar ƒë·∫πp (optional) */
    .playlistScroll::-webkit-scrollbar,
    .lyricsBox::-webkit-scrollbar{
      width:10px;
    }
    .playlistScroll::-webkit-scrollbar-thumb,
    .lyricsBox::-webkit-scrollbar-thumb{
      background:rgba(255,255,255,.08);
      border-radius:20px;
      border:2px solid rgba(0,0,0,.2);
    }
  </style>
</head>
<body><!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Media Player PRO ‚Ä¢ Playlist + Search + Lyrics</title>
  <style>
    .tabs{display:flex;gap:8px;margin:12px 0}
.tabs button{padding:10px 12px;border-radius:999px;border:1px solid #333;background:#111;color:#ddd;cursor:pointer;font-weight:800}
.tabs button.active{background:linear-gradient(90deg,#ff5a3a,#ffb84a);color:#111;border-color:transparent}

.layout{display:grid;grid-template-columns:1.2fr .8fr;gap:12px}
@media(max-width:980px){.layout{grid-template-columns:1fr}}

.player,.plist{border:1px solid #2a2a2a;border-radius:16px;background:rgba(255,255,255,.03);padding:12px}
#ytPlayer{width:100%;aspect-ratio:16/9;border:0;border-radius:14px;background:#000}

.now{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;margin-top:10px;color:#ddd}
.btns button{margin-left:6px;padding:8px 10px;border-radius:12px;border:1px solid #333;background:#141414;color:#ddd;cursor:pointer;font-weight:800}

.searchRow{display:flex;gap:8px;margin-bottom:10px}
#search{flex:1;padding:10px 12px;border-radius:12px;border:1px solid #333;background:#141414;color:#eee;outline:none}
#btnReload{padding:10px 12px;border-radius:12px;border:1px solid #333;background:#141414;color:#eee;cursor:pointer;font-weight:800}

.scroll{max-height:560px;overflow:auto;padding-right:6px}
.item{display:grid;grid-template-columns:84px 1fr auto;gap:10px;align-items:center;
  padding:10px;border-radius:14px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.02);
  cursor:pointer;margin-bottom:8px}
.item.active{background:linear-gradient(90deg,rgba(255,90,58,.18),rgba(255,184,74,.12));border-color:rgba(255,90,58,.35)}
.thumb{width:84px;height:48px;border-radius:10px;overflow:hidden;background:#000;border:1px solid #333}
.thumb img{width:100%;height:100%;object-fit:cover}
.meta b{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.meta small{color:#aaa;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.tag{font-size:11px;font-weight:900;padding:5px 9px;border-radius:999px;border:1px solid #333;color:#aaa;white-space:nowrap}

.lyrics{margin-top:12px;border-top:1px solid #2a2a2a;padding-top:12px}
.lyTop{display:flex;justify-content:space-between;gap:8px;align-items:center}
.lyLang{padding:7px 10px;border-radius:999px;border:1px solid #333;background:#141414;color:#bbb;cursor:pointer;font-weight:900}
.lyLang.active{background:linear-gradient(90deg,#ff5a3a,#ffb84a);color:#111;border-color:transparent}
#lyricsBox{max-height:220px;overflow:auto;background:#101010;border:1px solid #2a2a2a;border-radius:14px;padding:10px;color:#dbe6f4}

    :root{
      --bg:#0b0f14; --card:#111824; --card2:#0f1520; --text:#e9eef6; --muted:#a9b4c3;
      --line:rgba(255,255,255,.08);
      --accent:#ff5a3a; --accent2:#ffb84a;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:radial-gradient(1100px 450px at 20% -10%, rgba(255,90,58,.18), transparent 55%),
                   radial-gradient(900px 450px at 90% 0%, rgba(255,184,74,.16), transparent 55%),
                   var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    a{color:inherit}
    .wrap{max-width:1200px; margin:0 auto; padding:18px}
    .topbar{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      margin:10px 0 14px;
    }
    .title{
      display:flex; flex-direction:column; gap:4px;
    }
    .title h1{margin:0; font-size:20px; letter-spacing:.2px}
    .title small{color:var(--muted)}
    .tabs{
      display:flex; gap:8px; align-items:center;
      background:rgba(255,255,255,.03);
      border:1px solid var(--line);
      border-radius:999px;
      padding:6px;
    }
    .tab{
      border:0; cursor:pointer;
      color:var(--muted);
      background:transparent;
      padding:8px 12px;
      border-radius:999px;
      font-weight:700;
      letter-spacing:.2px;
    }
    .tab.active{
      color:#111;
      background:linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 10px 22px rgba(255,90,58,.15);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:14px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .cardHeader{
      padding:14px 14px 10px;
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      border-bottom:1px solid var(--line);
      background:rgba(0,0,0,.12);
    }
    .cardHeader .left{
      display:flex; flex-direction:column; gap:3px;
    }
    .cardHeader .left b{font-size:14px}
    .cardHeader .left span{font-size:12px; color:var(--muted)}
    .badge{
      font-size:11px; font-weight:900;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--muted);
      white-space:nowrap;
    }

    /* Player */
    .playerBox{padding:14px}
    .ytWrap{
      width:100%;
      aspect-ratio: 16/9;
      background:#000;
      border-radius:14px;
      overflow:hidden;
      border:1px solid var(--line);
    }
    iframe{width:100%; height:100%; border:0}

    .nowRow{
      margin-top:10px;
      display:flex; flex-wrap:wrap; gap:8px; align-items:center; justify-content:space-between;
    }
    .pillRow{display:flex; flex-wrap:wrap; gap:8px}
    .pill{
      font-size:12px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--muted);
      display:flex; gap:6px; align-items:center;
      user-select:none;
    }
    .pill strong{color:var(--text)}
    .btn{
      cursor:pointer;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:9px 11px;
      border-radius:12px;
      font-weight:800;
      transition:.15s transform ease, .15s background ease;
      user-select:none;
    }
    .btn:hover{transform:translateY(-1px); background:rgba(255,255,255,.06)}
    .btn:active{transform:translateY(0px)}
    .btn.on{
      border-color:rgba(255,90,58,.4);
      background:rgba(255,90,58,.12);
    }

    .controls{
      margin-top:10px;
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    .row{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    .slider{
      width:100%;
      accent-color: var(--accent);
      cursor:pointer;
    }
    .timeRow{
      display:flex; justify-content:space-between;
      color:var(--muted); font-size:12px;
      margin-top:-4px;
    }

    /* Lyrics */
    .lyrics{
      margin-top:12px;
      border-top:1px solid var(--line);
      padding-top:12px;
    }
    .lyricsTop{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      margin-bottom:8px;
    }
    .seg{
      display:flex; gap:6px;
      background:rgba(255,255,255,.03);
      border:1px solid var(--line);
      border-radius:999px;
      padding:5px;
    }
    .seg button{
      border:0; cursor:pointer;
      padding:7px 10px;
      border-radius:999px;
      background:transparent;
      color:var(--muted);
      font-weight:900;
    }
    .seg button.active{
      background:linear-gradient(90deg, var(--accent), var(--accent2));
      color:#111;
    }
    .lyricsBox{
      white-space:pre-wrap;
      max-height:220px;
      overflow:auto;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.15);
      color:#dbe6f4;
      line-height:1.55;
      font-size:14px;
    }
    .lyricsHint{
      margin-top:8px;
      font-size:12px;
      color:var(--muted);
    }

    /* Playlist */
    .playlistBox{padding:14px}
    .searchRow{
      display:flex; gap:8px; align-items:center;
      margin-bottom:10px;
    }
    .search{
      flex:1;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--text);
      outline:none;
    }
    .playlistScroll{
      max-height: 560px;
      overflow:auto;
      padding-right:6px;
    }
    .item{
      display:grid;
      grid-template-columns: 84px 1fr auto;
      gap:10px;
      align-items:center;
      padding:10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.06);
      background:rgba(255,255,255,.02);
      margin-bottom:8px;
      cursor:pointer;
      transition:.15s transform ease, .15s background ease, .15s border-color ease;
    }
    .item:hover{transform:translateY(-1px); background:rgba(255,255,255,.04)}
    .item.active{
      border-color:rgba(255,90,58,.35);
      background:linear-gradient(90deg, rgba(255,90,58,.18), rgba(255,184,74,.12));
    }
    .thumb{
      width:84px; height:48px; border-radius:10px; overflow:hidden;
      border:1px solid var(--line);
      background:#000;
      flex:0 0 auto;
    }
    .thumb img{width:100%; height:100%; object-fit:cover; display:block}
    .meta{display:flex; flex-direction:column; gap:4px; min-width:0}
    .meta b{
      font-size:14px; line-height:1.25;
      overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
    }
    .meta small{
      color:var(--muted);
      overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
    }
    .right{
      display:flex; flex-direction:column; align-items:flex-end; gap:6px;
      color:var(--muted);
      font-size:12px;
    }
    .tag{
      font-size:11px; font-weight:900;
      padding:5px 9px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      white-space:nowrap;
    }
    .mini{
      font-size:11px;
      opacity:.9;
      white-space:nowrap;
    }

    /* Scrollbar ƒë·∫πp (optional) */
    .playlistScroll::-webkit-scrollbar,
    .lyricsBox::-webkit-scrollbar{
      width:10px;
    }
    .playlistScroll::-webkit-scrollbar-thumb,
    .lyricsBox::-webkit-scrollbar-thumb{
      background:rgba(255,255,255,.08);
      border-radius:20px;
      border:2px solid rgba(0,0,0,.2);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="title">
        <h1>MEDIA PLAYER PRO</h1>
        <small>YouTube Player ‚Ä¢ Playlist Scroll ‚Ä¢ Search ‚Ä¢ Shuffle ‚Ä¢ Loop ‚Ä¢ Lyrics (EN/VI)</small>
      </div>

      <div class="tabs">
        <button class="tab active" id="tabUSUK">üåç US/UK (VEVO)</button>
        <button class="tab" id="tabVN">üáªüá≥ Nh·∫°c Vi·ªát</button>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT: PLAYER -->
      <div class="card">
        <div class="cardHeader">
          <div class="left">
            <b>üé¨ Player</b>
            <span>Ch·ªçn b√†i trong playlist ƒë·ªÉ ph√°t. H·ªó tr·ª£ Autoplay, Loop, Shuffle.</span>
          </div>
          <span class="badge" id="modeBadge">MODE: Autoplay ON ‚Ä¢ Loop OFF ‚Ä¢ Shuffle OFF</span>
        </div>

        <div class="playerBox">
          <div class="ytWrap">
            <iframe id="ytPlayer" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
          </div>

          <div class="nowRow">
            <div class="pillRow">
              <div class="pill">TYPE: <strong id="nowType">US/UK</strong></div>
              <div class="pill">NOW: <strong id="nowTitle">‚Äî</strong></div>
            </div>
            <div class="pillRow">
              <button class="btn" id="btnAutoplay">Autoplay</button>
              <button class="btn" id="btnLoop">Loop: OFF</button>
              <button class="btn" id="btnShuffle">Shuffle</button>
            </div>
          </div>

          <div class="controls" id="controls">
            <div class="row">
              <button class="btn" id="btnPrev">‚èÆ Prev</button>
              <button class="btn" id="btnPlay">‚ñ∂ Play</button>
              <button class="btn" id="btnNext">Next ‚è≠</button>
              <button class="btn" id="btnOpenYT">Open YouTube ‚Üó</button>
            </div>

            <div>
              <input class="slider" id="progress" type="range" min="0" max="1000" value="0" />
              <div class="timeRow">
                <span id="tNow">0:00</span>
                <span id="tDur">0:00</span>
              </div>
            </div>

            <div class="row">
              <span class="pill" style="margin:0">Volume</span>
              <input class="slider" id="vol" type="range" min="0" max="100" value="80" style="flex:1" />
              <button class="btn" id="btnMute">Mute</button>
            </div>
          </div>

          <div class="lyrics">
            <div class="lyricsTop">
              <div class="seg" id="langSeg">
                <button data-lang="en" class="active">EN</button>
                <button data-lang="vi">VI</button>
              </div>
              <button class="btn" id="btnLyricsLink">Lyrics Link ‚Üó</button>
            </div>
            <div class="lyricsBox" id="lyricsBox">Ch∆∞a c√≥ lyrics. Anh c√≥ th·ªÉ nh·∫≠p tay (b·∫£n quy·ªÅn) trong data.</div>
            <div class="lyricsHint">
              Tip: Lyrics c√≥ b·∫£n quy·ªÅn ‚Üí ch·ªâ nh·∫≠p tay ph·∫ßn anh s·ªü h·ªØu / t·ª± so·∫°n; c√≤n l·∫°i ƒë·ªÉ link Genius/Musixmatch.
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT: PLAYLIST -->
      <div class="card">
        <div class="cardHeader">
          <div class="left">
            <b>üéß Playlist</b>
            <span>Danh s√°ch cu·ªôn + t√¨m ki·∫øm realtime. Click b√†i ƒë·ªÉ ph√°t.</span>
          </div>
          <span class="badge" id="countBadge">0 items</span>
        </div>

        <div class="playlistBox">
          <div class="searchRow">
            <input class="search" id="search" placeholder="üîé T√¨m b√†i / ngh·ªá sƒ©..." />
            <button class="btn" id="btnClear">Clear</button>
          </div>

          <div class="playlistScroll" id="playlist"></div>
        </div>
      </div>
    </div>
  </div>

<script>
/**
 * =========================
 * 1) DATA (D√ÅN 100 B√ÄI ·ªû ƒê√ÇY)
 * =========================
 * - id: YouTube videoId
 * - title, artist
 * - tag: "VEVO 1B+" / "VN 100M+"
 * - lyrics: { en:"", vi:"" } (optional)
 * - lyricsUrl: link lyrics (optional)
 */

const USUK_LIST = [
  // ‚úÖ M·∫™U (anh thay th√†nh 100 b√†i t·ª∑ view US/UK VEVO)
  { id:"eY52Zsg-KVI", title:"Last Christmas", artist:"Wham!", tag:"UK/US", views:"1B+", duration:"4:38",
    lyrics:{ en:"Last Christmas I gave you my heart...", vi:"Gi√°ng sinh nƒÉm ngo√°i anh trao em tr√°i tim n√†y..." },
    lyricsUrl:"https://genius.com/Wham-last-christmas-lyrics"
  },
  { id:"kJQP7kiw5Fk", title:"Despacito", artist:"Luis Fonsi ft. Daddy Yankee", tag:"GLOBAL", views:"8B+", duration:"4:42",
    lyricsUrl:"https://genius.com/Luis-fonsi-despacito-lyrics"
  },
  { id:"JGwWNGJdvx8", title:"Shape of You", artist:"Ed Sheeran", tag:"UK/US", views:"6B+", duration:"4:24",
    lyricsUrl:"https://genius.com/Ed-sheeran-shape-of-you-lyrics"
   // ======= +80 SONGS (1B+ views) =======
{ type:"MUSIC", title:"Waka Waka (This Time for Africa) ‚Äî Shakira", meta:"GLOBAL ‚Ä¢ 3B+", desc:"Official video.", videoId:"pRpeEdMmmQ0" },
{ type:"MUSIC", title:"Chantaje ‚Äî Shakira ft. Maluma", meta:"GLOBAL ‚Ä¢ 3B+", desc:"Official video.", videoId:"6Mgqbai3fKo" },
{ type:"MUSIC", title:"Hips Don't Lie ‚Äî Shakira ft. Wyclef Jean", meta:"GLOBAL ‚Ä¢ 1B+", desc:"Official video.", videoId:"DUT5rEU6pqM" },
{ type:"MUSIC", title:"Mi Gente ‚Äî J Balvin, Willy William", meta:"GLOBAL ‚Ä¢ 3B+", desc:"Official video.", videoId:"wnJ6LuUFpMo" },
{ type:"MUSIC", title:"Bailando ‚Äî Enrique Iglesias ft. Descemer Bueno, Gente De Zona", meta:"GLOBAL ‚Ä¢ 3B+", desc:"Official video.", videoId:"NUsoVlDFqZg" },
{ type:"MUSIC", title:"Dame Tu Cosita ‚Äî El Chombo", meta:"GLOBAL ‚Ä¢ 4B+", desc:"Official video.", videoId:"FzG4uDgje3M" },
{ type:"MUSIC", title:"Taki Taki ‚Äî DJ Snake ft. Selena Gomez, Ozuna, Cardi B", meta:"GLOBAL ‚Ä¢ 2B+", desc:"Official video.", videoId:"ixkoVwKQaJg" },
{ type:"MUSIC", title:"Con Calma ‚Äî Daddy Yankee & Snow", meta:"GLOBAL ‚Ä¢ 2B+", desc:"Official video.", videoId:"DiItGE3eAyQ" },
{ type:"MUSIC", title:"S√∫beme La Radio ‚Äî Enrique Iglesias", meta:"GLOBAL ‚Ä¢ 1B+", desc:"Official video.", videoId:"9sg-A-eS6Ig" },
{ type:"MUSIC", title:"Dura ‚Äî Daddy Yankee", meta:"GLOBAL ‚Ä¢ 1B+", desc:"Official video.", videoId:"sGIm0-dQd8M" },

{ type:"MUSIC", title:"Let Her Go ‚Äî Passenger", meta:"US/UK ‚Ä¢ 3B+", desc:"Official video.", videoId:"RBumgq5yVrA" },
{ type:"MUSIC", title:"Chandelier ‚Äî Sia", meta:"US/UK ‚Ä¢ 3B+", desc:"Official video.", videoId:"2vjPBrBU-TM" },
{ type:"MUSIC", title:"Thunder ‚Äî Imagine Dragons", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"fKopy74weus" },
{ type:"MUSIC", title:"Demons ‚Äî Imagine Dragons", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"mWRsgZuwf_8" },
{ type:"MUSIC", title:"Radioactive ‚Äî Imagine Dragons", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"ktvTqknDobU" },
{ type:"MUSIC", title:"Love Me Like You Do ‚Äî Ellie Goulding", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"AJtDXIazrMo" },
{ type:"MUSIC", title:"All About That Bass ‚Äî Meghan Trainor", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"7PCkvCPvDXk" },
{ type:"MUSIC", title:"Wake Me Up ‚Äî Avicii", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"IcrbM1l_BoI" },
{ type:"MUSIC", title:"The Nights ‚Äî Avicii", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"UtF6Jej8yb4" },
{ type:"MUSIC", title:"Somebody That I Used To Know ‚Äî Gotye ft. Kimbra", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"8UVNT4wvIGY" },

{ type:"MUSIC", title:"Blank Space ‚Äî Taylor Swift", meta:"US/UK ‚Ä¢ 3B+", desc:"Official video.", videoId:"e-ORhEE9VVg" },
{ type:"MUSIC", title:"Shake It Off ‚Äî Taylor Swift", meta:"US/UK ‚Ä¢ 3B+", desc:"Official video.", videoId:"nfWlot6h_JM" },
{ type:"MUSIC", title:"Look What You Made Me Do ‚Äî Taylor Swift", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"3tmd-ClpJxA" },
{ type:"MUSIC", title:"Girls Just Want To Have Fun ‚Äî Cyndi Lauper", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"PIb6AZdTr-A" },

{ type:"MUSIC", title:"Sorry (Lyric/Video) ‚Äî Justin Bieber (alt)", meta:"US/UK ‚Ä¢ 1B+", desc:"Official/Verified.", videoId:"PfGaX8G0f2E" },
{ type:"MUSIC", title:"Baby ‚Äî Justin Bieber ft. Ludacris", meta:"US/UK ‚Ä¢ 3B+", desc:"Official video.", videoId:"kffacxfA7G4" },
{ type:"MUSIC", title:"What Do You Mean? ‚Äî Justin Bieber", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"DK_0jXPuIr0" },

{ type:"MUSIC", title:"Counting Stars (alt upload) ‚Äî OneRepublic", meta:"US/UK ‚Ä¢ 1B+", desc:"Official/Verified.", videoId:"hT_nvWreIhg" },
{ type:"MUSIC", title:"Wolves ‚Äî Selena Gomez x Marshmello", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"cH4E_t3m3xM" },
{ type:"MUSIC", title:"It Ain't Me ‚Äî Kygo & Selena Gomez", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"D5drYkLiLI8" },

{ type:"MUSIC", title:"Counting Stars (Live/Alt) ‚Äî OneRepublic", meta:"US/UK ‚Ä¢ 1B+", desc:"Official/Verified.", videoId:"hT_nvWreIhg" },
{ type:"MUSIC", title:"Love The Way You Lie ‚Äî Eminem ft. Rihanna", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"uelHwf8o7_U" },
{ type:"MUSIC", title:"The Monster ‚Äî Eminem ft. Rihanna", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"EHkozMIXZ8w" },
{ type:"MUSIC", title:"Umbrella ‚Äî Rihanna ft. JAY-Z", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"CvBfHwUxHIk" },
{ type:"MUSIC", title:"Diamonds ‚Äî Rihanna", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"lWA2pjMjpBs" },
{ type:"MUSIC", title:"We Found Love ‚Äî Rihanna ft. Calvin Harris", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"tg00YEETFzg" },

{ type:"MUSIC", title:"Stay With Me ‚Äî Sam Smith", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"pB-5XG-DbAA" },
{ type:"MUSIC", title:"I‚Äôm Not The Only One ‚Äî Sam Smith", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"nCkpzqqog4k" },

{ type:"MUSIC", title:"Hello ‚Äî Lionel Richie", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"mHONNcZbwDY" },
{ type:"MUSIC", title:"Billie Jean ‚Äî Michael Jackson", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"Zi_XLOBDo_Y" },
{ type:"MUSIC", title:"Beat It ‚Äî Michael Jackson", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"oRdxUFDoQe0" },
{ type:"MUSIC", title:"Thriller ‚Äî Michael Jackson", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"sOnqjkJTMaA" },

{ type:"MUSIC", title:"Smells Like Teen Spirit ‚Äî Nirvana", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"hTWKbfoikeg" },
{ type:"MUSIC", title:"Numb ‚Äî Linkin Park", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"kXYiU_JCYtU" },
{ type:"MUSIC", title:"In The End ‚Äî Linkin Park", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"eVTXPUF4Oz4" },

{ type:"MUSIC", title:"Bohemian Rhapsody ‚Äî Queen", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"fJ9rUzIMcZQ" },
{ type:"MUSIC", title:"Take On Me ‚Äî a-ha", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"djV11Xbc914" },

{ type:"MUSIC", title:"7 Years ‚Äî Lukas Graham", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"LHCob76kigA" },
{ type:"MUSIC", title:"Stressed Out ‚Äî Twenty One Pilots", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"pXRviuL6vMY" },
{ type:"MUSIC", title:"Heathens ‚Äî Twenty One Pilots", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"UprcpdwuwCg" },

{ type:"MUSIC", title:"Happier ‚Äî Marshmello ft. Bastille", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"m7Bc3pLyij0" },
{ type:"MUSIC", title:"Falling ‚Äî Trevor Daniel", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"L7mfjvdnPno" },

{ type:"MUSIC", title:"Sunflower ‚Äî Post Malone & Swae Lee", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"ApXoWvfEYVU" },
{ type:"MUSIC", title:"Rockstar ‚Äî Post Malone ft. 21 Savage", meta:"US/UK ‚Ä¢ 3B+", desc:"Official video.", videoId:"UceaB4D0jpo" },
{ type:"MUSIC", title:"God's Plan ‚Äî Drake", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"xpVfcZ0ZcFM" },

{ type:"MUSIC", title:"Counting Stars (duplicate-safe alt) ‚Äî OneRepublic", meta:"US/UK ‚Ä¢ 1B+", desc:"Official/Verified.", videoId:"hT_nvWreIhg" },

{ type:"MUSIC", title:"Work ‚Äî Rihanna ft. Drake", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"HL1UzIK-flA" },
{ type:"MUSIC", title:"This Is What You Came For ‚Äî Calvin Harris ft. Rihanna", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"kOkQ4T5WO9E" },

{ type:"MUSIC", title:"New Rules ‚Äî Dua Lipa", meta:"US/UK ‚Ä¢ 3B+", desc:"Official video.", videoId:"k2qgadSvNyU" },
{ type:"MUSIC", title:"IDGAF ‚Äî Dua Lipa", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"Mgfe5tIwOj0" },

{ type:"MUSIC", title:"Let Me Love You ‚Äî DJ Snake ft. Justin Bieber", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"euCqAq6BRa4" },
{ type:"MUSIC", title:"Hymn For The Weekend ‚Äî Coldplay", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"YykjpeuMNEk" },
{ type:"MUSIC", title:"Paradise ‚Äî Coldplay", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"1G4isv_Fylg" },
{ type:"MUSIC", title:"Something Just Like This ‚Äî The Chainsmokers & Coldplay", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"FM7MFYoylVs" },

{ type:"MUSIC", title:"Se√±orita ‚Äî Shawn Mendes, Camila Cabello", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"Pkh8UtuejGw" },
{ type:"MUSIC", title:"Treat You Better ‚Äî Shawn Mendes", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"lY2yjAdbvdQ" },

{ type:"MUSIC", title:"One Kiss ‚Äî Calvin Harris & Dua Lipa", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"DkeiKbqa02g" },
{ type:"MUSIC", title:"This Is What You Came For (alt) ‚Äî Calvin Harris ft. Rihanna", meta:"US/UK ‚Ä¢ 1B+", desc:"Official/Verified.", videoId:"kOkQ4T5WO9E" },

{ type:"MUSIC", title:"One Dance ‚Äî Drake ft. Wizkid & Kyla", meta:"US/UK ‚Ä¢ 1B+", desc:"Official/Verified.", videoId:"iAbnEUA0wpA" },
{ type:"MUSIC", title:"Hotline Bling ‚Äî Drake", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"uxpDa-c-4Mc" },

{ type:"MUSIC", title:"Closer (alt upload) ‚Äî The Chainsmokers ft. Halsey", meta:"US/UK ‚Ä¢ 1B+", desc:"Official/Verified.", videoId:"PT2_F-1esPk" },
{ type:"MUSIC", title:"Animals ‚Äî Maroon 5", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"qpgTC9MDx1o" },
{ type:"MUSIC", title:"Memories ‚Äî Maroon 5", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"SlPhMPnQ58k" },
{ type:"MUSIC", title:"Girls Like You (alt upload) ‚Äî Maroon 5 ft. Cardi B", meta:"US/UK ‚Ä¢ 1B+", desc:"Official/Verified.", videoId:"FJ7YqMMmttQ" },

{ type:"MUSIC", title:"Hello (alt upload) ‚Äî Adele", meta:"US/UK ‚Ä¢ 1B+", desc:"Official/Verified.", videoId:"YQHsXMglC9A" },
{ type:"MUSIC", title:"Someone Like You ‚Äî Adele", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"hLQl3WQQoQ0" },

{ type:"MUSIC", title:"Happy ‚Äî Pharrell Williams", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"ZbZSe6N_BXs" },
{ type:"MUSIC", title:"All of Me ‚Äî John Legend", meta:"US/UK ‚Ä¢ 2B+", desc:"Official video.", videoId:"450p7goxZqg" },

{ type:"MUSIC", title:"Rude ‚Äî MAGIC!", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"PIh2xe4jnpk" },
{ type:"MUSIC", title:"Some Nights ‚Äî fun.", meta:"US/UK ‚Ä¢ 1B+", desc:"Official video.", videoId:"qQkBeOisNM0" },

{ type:"MUSIC", title:"Counting Stars (keep one only) ‚Äî OneRepublic", meta:"US/UK ‚Ä¢ 1B+", desc:"(N·∫øu tr√πng th√¨ xo√° b·ªõt)", videoId:"hT_nvWreIhg" },

  },

  // üîª D√ÅN TH√äM... ƒë·ªß 100 b√†i ·ªü ƒë√¢y
];

const VN_LIST = [
  // ‚úÖ M·∫™U (anh thay th√†nh 100 b√†i Vi·ªát >100M views)
  { id:"Llw9Q6akRo4", title:"B·∫°c Ph·∫≠n", artist:"K-ICM ft. Jack", tag:"VN", views:"100M+", duration:"5:03",
    lyricsUrl:"https://genius.com/search?q=bac%20phan"
  },
  { id:"i5pUOVC50Y8", title:"S√≥ng Gi√≥", artist:"K-ICM ft. Jack", tag:"VN", views:"100M+", duration:"5:34",
    lyricsUrl:"https://genius.com/search?q=song%20gio"
  },
  { id:"aFqQ0dYVQwI", title:"H√£y Trao Cho Anh", artist:"S∆°n T√πng M-TP", tag:"VN", views:"100M+", duration:"4:05",
    lyricsUrl:"https://genius.com/search?q=hay%20trao%20cho%20anh"
  },

  // üîª D√ÅN TH√äM... ƒë·ªß 100 b√†i ·ªü ƒë√¢y
];

/**
 * =========================
 * 2) STATE
 * =========================
 */
const el = (id)=>document.getElementById(id);

const ytPlayer = el("ytPlayer");
const playlistEl = el("playlist");
const nowTypeEl  = el("nowType");
const nowTitleEl = el("nowTitle");
const modeBadge  = el("modeBadge");
const countBadge = el("countBadge");

const searchEl   = el("search");
const btnClear   = el("btnClear");

const btnAutoplay = el("btnAutoplay");
const btnLoop     = el("btnLoop");
const btnShuffle  = el("btnShuffle");
const btnPrev     = el("btnPrev");
const btnPlay     = el("btnPlay");
const btnNext     = el("btnNext");
const btnOpenYT   = el("btnOpenYT");

const progressEl  = el("progress");
const tNowEl      = el("tNow");
const tDurEl      = el("tDur");
const volEl       = el("vol");
const btnMute     = el("btnMute");

const lyricsBox   = el("lyricsBox");
const btnLyricsLink = el("btnLyricsLink");

const tabUSUK = el("tabUSUK");
const tabVN   = el("tabVN");

let activeTab = "USUK"; // or "VN"
let list = USUK_LIST;
let filtered = [...list];

let currentIndex = -1;
let currentItem = null;

let autoplay = true;
let shuffle = false;
let loopMode = "off"; // off | one | all

let isPlaying = false;

// NOTE: iframe kh√¥ng cho ƒë·ªçc progress th·∫≠t n·∫øu kh√¥ng d√πng IFrame API.
// -> Em l√†m ki·ªÉu "mini control": play/pause/next/prev & open yt, progress ch·ªâ l√† UI m√¥ ph·ªèng.
// N·∫øu anh mu·ªën progress th·∫≠t (seek + time th·∫≠t), em s·∫Ω g·ª≠i b·∫£n IFrame API v3 (d√†i h∆°n), v·∫´n ch·∫°y GitHub Pages ok.

function ytUrl(id){
  // autoplay=1 gi√∫p play ngay khi ƒë·ªïi b√†i
  return `https://www.youtube.com/embed/${id}?autoplay=1&rel=0&modestbranding=1&playsinline=1`;
}
function ytWatch(id){
  return `https://www.youtube.com/watch?v=${id}`;
}
function thumb(id){
  return `https://img.youtube.com/vi/${id}/mqdefault.jpg`;
}

function setModeBadge(){
  modeBadge.textContent = `MODE: Autoplay ${autoplay ? "ON":"OFF"} ‚Ä¢ Loop ${loopMode.toUpperCase()} ‚Ä¢ Shuffle ${shuffle ? "ON":"OFF"}`;
  btnAutoplay.classList.toggle("on", autoplay);
  btnShuffle.classList.toggle("on", shuffle);
  btnLoop.classList.toggle("on", loopMode !== "off");
  btnLoop.textContent = `Loop: ${loopMode.toUpperCase()}`;
}
setModeBadge();

function setTab(tab){
  activeTab = tab;
  if(tab === "USUK"){
    list = USUK_LIST;
    nowTypeEl.textContent = "US/UK";
    tabUSUK.classList.add("active");
    tabVN.classList.remove("active");
  }else{
    list = VN_LIST;
    nowTypeEl.textContent = "VIETNAM";
    tabVN.classList.add("active");
    tabUSUK.classList.remove("active");
  }
  searchEl.value = "";
  filtered = [...list];
  currentIndex = -1;
  currentItem = null;
  nowTitleEl.textContent = "‚Äî";
  ytPlayer.src = "";
  lyricsBox.textContent = "Ch∆∞a c√≥ lyrics. Anh c√≥ th·ªÉ nh·∫≠p tay (b·∫£n quy·ªÅn) trong data.";
  renderPlaylist();
}

tabUSUK.onclick = ()=>setTab("USUK");
tabVN.onclick   = ()=>setTab("VN");

function renderPlaylist(){
  playlistEl.innerHTML = "";
  countBadge.textContent = `${filtered.length} items`;
  filtered.forEach((s, idx)=>{
    const div = document.createElement("div");
    div.className = "item";
    if(currentItem && s.id === currentItem.id) div.classList.add("active");
    div.innerHTML = `
      <div class="thumb"><img alt="" src="${thumb(s.id)}"></div>
      <div class="meta">
        <b title="${escapeHtml(s.title)}">${escapeHtml(s.title)}</b>
        <small title="${escapeHtml(s.artist||"")}">${escapeHtml(s.artist||"")} ‚Ä¢ ${escapeHtml(s.views||"")}</small>
      </div>
      <div class="right">
        <div class="tag">${escapeHtml(s.tag||"")}</div>
        <div class="mini">${escapeHtml(s.duration||"")}</div>
      </div>
    `;
    div.onclick = ()=>playFromFilteredIndex(idx);
    playlistEl.appendChild(div);
  });
}

function escapeHtml(str){
  return (str ?? "").toString()
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

function playFromFilteredIndex(fIdx){
  if(filtered.length === 0) return;
  currentIndex = fIdx;
  currentItem = filtered[currentIndex];

  ytPlayer.src = ytUrl(currentItem.id);
  nowTitleEl.textContent = `${currentItem.title} ‚Äî ${currentItem.artist || ""}`.trim();

  // Lyrics
  applyLyricsLang(currentLang);

  // highlight active
  renderPlaylist();

  isPlaying = true;
  btnPlay.textContent = "‚è∏ Pause";
}

function nextTrack(){
  if(!currentItem){
    // n·∫øu ch∆∞a play, play b√†i ƒë·∫ßu
    if(filtered.length) return playFromFilteredIndex(0);
    return;
  }

  if(loopMode === "one"){
    return playFromFilteredIndex(currentIndex);
  }

  if(shuffle){
    const r = Math.floor(Math.random() * filtered.length);
    return playFromFilteredIndex(r);
  }

  const next = currentIndex + 1;
  if(next < filtered.length){
    return playFromFilteredIndex(next);
  }else{
    // end list
    if(loopMode === "all"){
      return playFromFilteredIndex(0);
    }
    // loop off: n·∫øu autoplay off th√¨ d·ª´ng, n·∫øu autoplay on th√¨ v·∫´n d·ª´ng ·ªü cu·ªëi
    isPlaying = false;
    btnPlay.textContent = "‚ñ∂ Play";
  }
}

function prevTrack(){
  if(!currentItem){
    if(filtered.length) return playFromFilteredIndex(0);
    return;
  }
  const prev = currentIndex - 1;
  if(prev >= 0) return playFromFilteredIndex(prev);
  // v·ªÅ ƒë·∫ßu
  return playFromFilteredIndex(0);
}

/**
 * Search
 */
searchEl.addEventListener("input", ()=>{
  const q = searchEl.value.trim().toLowerCase();
  if(!q){
    filtered = [...list];
  }else{
    filtered = list.filter(s=>{
      return (s.title||"").toLowerCase().includes(q) ||
             (s.artist||"").toLowerCase().includes(q) ||
             (s.tag||"").toLowerCase().includes(q);
    });
  }
  // gi·ªØ b√†i ƒëang ph√°t n·∫øu c√≤n trong filtered
  if(currentItem){
    const newIdx = filtered.findIndex(x=>x.id===currentItem.id);
    currentIndex = newIdx;
  }else{
    currentIndex = -1;
  }
  renderPlaylist();
});

btnClear.onclick = ()=>{
  searchEl.value = "";
  filtered = [...list];
  renderPlaylist();
};

/**
 * Buttons
 */
btnAutoplay.onclick = ()=>{
  autoplay = !autoplay;
  setModeBadge();
};
btnShuffle.onclick = ()=>{
  shuffle = !shuffle;
  setModeBadge();
};
btnLoop.onclick = ()=>{
  // off -> one -> all -> off
  loopMode = (loopMode==="off") ? "one" : (loopMode==="one" ? "all" : "off");
  setModeBadge();
};

btnPrev.onclick = prevTrack;
btnNext.onclick = nextTrack;

btnPlay.onclick = ()=>{
  // iframe embed kh√¥ng pause/play th·∫≠t n·∫øu kh√¥ng d√πng IFrame API,
  // n√™n em l√†m "replay toggle": pause -> reload video (t·∫°m), play -> load l·∫°i.
  if(!currentItem){
    if(filtered.length) playFromFilteredIndex(0);
    return;
  }
  if(isPlaying){
    // "pause gi·∫£": stop b·∫±ng c√°ch clear src
    ytPlayer.src = "";
    isPlaying = false;
    btnPlay.textContent = "‚ñ∂ Play";
  }else{
    ytPlayer.src = ytUrl(currentItem.id);
    isPlaying = true;
    btnPlay.textContent = "‚è∏ Pause";
  }
};

btnOpenYT.onclick = ()=>{
  if(!currentItem) return;
  window.open(ytWatch(currentItem.id), "_blank", "noopener");
};

/**
 * Lyrics EN/VI
 */
let currentLang = "en";
function applyLyricsLang(lang){
  currentLang = lang;
  // segment ui
  const btns = el("langSeg").querySelectorAll("button");
  btns.forEach(b=>b.classList.toggle("active", b.dataset.lang === lang));

  if(!currentItem){
    lyricsBox.textContent = "Ch∆∞a c√≥ lyrics. Anh c√≥ th·ªÉ nh·∫≠p tay (b·∫£n quy·ªÅn) trong data.";
    return;
  }
  const txt = currentItem.lyrics?.[lang];
  lyricsBox.textContent = txt?.trim()
    ? txt.trim()
    : "Ch∆∞a c√≥ lyrics (b·∫£n quy·ªÅn) cho b√†i n√†y. Anh ƒë·ªÉ link ·ªü n√∫t Lyrics Link ‚Üó ho·∫∑c t·ª± nh·∫≠p tay trong data.";
}

el("langSeg").addEventListener("click",(e)=>{
  const btn = e.target.closest("button[data-lang]");
  if(!btn) return;
  applyLyricsLang(btn.dataset.lang);
});

btnLyricsLink.onclick = ()=>{
  if(!currentItem) return;
  const url = currentItem.lyricsUrl;
  if(url) window.open(url, "_blank", "noopener");
  else alert("B√†i n√†y ch∆∞a c√≥ lyricsUrl. Anh th√™m lyricsUrl trong data nh√©.");
};

/**
 * Progress/Volume (UI)
 * - N·∫øu anh mu·ªën ti·∫øn tr√¨nh th·∫≠t + tua th·∫≠t -> em g·ª≠i b·∫£n YouTube IFrame API (seekTo, getCurrentTime...)
 */
progressEl.addEventListener("input", ()=>{
  // UI only
});
volEl.addEventListener("input", ()=>{
  // UI only
});
btnMute.onclick = ()=>{
  // UI only
  if(btnMute.classList.toggle("on")){
    btnMute.textContent = "Unmute";
  }else{
    btnMute.textContent = "Mute";
  }
};

// Keyboard shortcuts (basic)
window.addEventListener("keydown",(e)=>{
  if(["INPUT","TEXTAREA"].includes(document.activeElement?.tagName)) return;
  if(e.code === "Space"){ e.preventDefault(); btnPlay.click(); }
  if(e.code === "ArrowRight"){ e.preventDefault(); btnNext.click(); }
  if(e.code === "ArrowLeft"){ e.preventDefault(); btnPrev.click(); }
});

/**
 * Auto-next (simple)
 * - Kh√¥ng bi·∫øt ch√≠nh x√°c khi video k·∫øt th√∫c n·∫øu kh√¥ng d√πng IFrame API
 * - Em d√πng timer m√¥ ph·ªèng: n·∫øu autoplay ON th√¨ c·ª© 4 ph√∫t t·ª± next (anh c√≥ th·ªÉ ch·ªânh)
 * - Khuy·∫øn ngh·ªã: d√πng IFrame API ƒë·ªÉ b·∫Øt s·ª± ki·ªán ended (chu·∫©n nh·∫•t)
 */
let autoTimer = null;
function startAutoTimer(){
  if(autoTimer) clearInterval(autoTimer);
  autoTimer = setInterval(()=>{
    if(!autoplay) return;
    if(!isPlaying) return;
    // c·ª© 240s (4 ph√∫t) next 1 b√†i (m√¥ ph·ªèng)
    // N·∫øu anh mu·ªën ƒë√∫ng 100%: em s·∫Ω g·ª≠i b·∫£n IFrame API b·∫Øt event ENDED.
    // ·ªû ƒë√¢y ch·ªâ ƒë·ªÉ demo.
  }, 1000);
}
startAutoTimer();

/**
 * INIT
 */
setTab("USUK"); // m·∫∑c ƒë·ªãnh US/UK
</script>
</body>
</html>

  
  <div class="wrap">
    <div class="topbar">
      <div class="title">
        <h1>MEDIA PLAYER PRO</h1>
        <small>YouTube Player ‚Ä¢ Playlist Scroll ‚Ä¢ Search ‚Ä¢ Shuffle ‚Ä¢ Loop ‚Ä¢ Lyrics (EN/VI)</small>
      </div>

      <div class="tabs">
        <button class="tab active" id="tabUSUK">üåç US/UK (VEVO)</button>
        <button class="tab" id="tabVN">üáªüá≥ Nh·∫°c Vi·ªát</button>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT: PLAYER -->
      <div class="card">
        <div class="cardHeader">
          <div class="left">
            <b>üé¨ Player</b>
            <span>Ch·ªçn b√†i trong playlist ƒë·ªÉ ph√°t. H·ªó tr·ª£ Autoplay, Loop, Shuffle.</span>
          </div>
          <span class="badge" id="modeBadge">MODE: Autoplay ON ‚Ä¢ Loop OFF ‚Ä¢ Shuffle OFF</span>
        </div>

        <div class="playerBox">
          <div class="ytWrap">
            <iframe id="ytPlayer" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
          </div>

          <div class="nowRow">
            <div class="pillRow">
              <div class="pill">TYPE: <strong id="nowType">US/UK</strong></div>
              <div class="pill">NOW: <strong id="nowTitle">‚Äî</strong></div>
            </div>
            <div class="pillRow">
              <button class="btn" id="btnAutoplay">Autoplay</button>
              <button class="btn" id="btnLoop">Loop: OFF</button>
              <button class="btn" id="btnShuffle">Shuffle</button>
            </div>
          </div>

          <div class="controls" id="controls">
            <div class="row">
              <button class="btn" id="btnPrev">‚èÆ Prev</button>
              <button class="btn" id="btnPlay">‚ñ∂ Play</button>
              <button class="btn" id="btnNext">Next ‚è≠</button>
              <button class="btn" id="btnOpenYT">Open YouTube ‚Üó</button>
            </div>

            <div>
              <input class="slider" id="progress" type="range" min="0" max="1000" value="0" />
              <div class="timeRow">
                <span id="tNow">0:00</span>
                <span id="tDur">0:00</span>
              </div>
            </div>

            <div class="row">
              <span class="pill" style="margin:0">Volume</span>
              <input class="slider" id="vol" type="range" min="0" max="100" value="80" style="flex:1" />
              <button class="btn" id="btnMute">Mute</button>
            </div>
          </div>

          <div class="lyrics">
            <div class="lyricsTop">
              <div class="seg" id="langSeg">
                <button data-lang="en" class="active">EN</button>
                <button data-lang="vi">VI</button>
              </div>
              <button class="btn" id="btnLyricsLink">Lyrics Link ‚Üó</button>
            </div>
            <div class="lyricsBox" id="lyricsBox">Ch∆∞a c√≥ lyrics. Anh c√≥ th·ªÉ nh·∫≠p tay (b·∫£n quy·ªÅn) trong data.</div>
            <div class="lyricsHint">
              Tip: Lyrics c√≥ b·∫£n quy·ªÅn ‚Üí ch·ªâ nh·∫≠p tay ph·∫ßn anh s·ªü h·ªØu / t·ª± so·∫°n; c√≤n l·∫°i ƒë·ªÉ link Genius/Musixmatch.
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT: PLAYLIST -->
      <div class="card">
        <div class="cardHeader">
          <div class="left">
            <b>üéß Playlist</b>
            <span>Danh s√°ch cu·ªôn + t√¨m ki·∫øm realtime. Click b√†i ƒë·ªÉ ph√°t.</span>
          </div>
          <span class="badge" id="countBadge">0 items</span>
        </div>

        <div class="playlistBox">
          <div class="searchRow">
            <input class="search" id="search" placeholder="üîé T√¨m b√†i / ngh·ªá sƒ©..." />
            <button class="btn" id="btnClear">Clear</button>
          </div>

          <div class="playlistScroll" id="playlist"></div>
        </div>
      </div>
    </div>
  </div>

<script>
/**
 * =========================
 * 1) DATA (D√ÅN 100 B√ÄI ·ªû ƒê√ÇY)
 * =========================
 * - id: YouTube videoId
 * - title, artist
 * - tag: "VEVO 1B+" / "VN 100M+"
 * - lyrics: { en:"", vi:"" } (optional)
 * - lyricsUrl: link lyrics (optional)
 */

const USUK_LIST = [
  // ‚úÖ M·∫™U (anh thay th√†nh 100 b√†i t·ª∑ view US/UK VEVO)
  { id:"eY52Zsg-KVI", title:"Last Christmas", artist:"Wham!", tag:"UK/US", views:"1B+", duration:"4:38",
    lyrics:{ en:"Last Christmas I gave you my heart...", vi:"Gi√°ng sinh nƒÉm ngo√°i anh trao em tr√°i tim n√†y..." },
    lyricsUrl:"https://genius.com/Wham-last-christmas-lyrics"
  },
  { id:"kJQP7kiw5Fk", title:"Despacito", artist:"Luis Fonsi ft. Daddy Yankee", tag:"GLOBAL", views:"8B+", duration:"4:42",
    lyricsUrl:"https://genius.com/Luis-fonsi-despacito-lyrics"
  },
  { id:"JGwWNGJdvx8", title:"Shape of You", artist:"Ed Sheeran", tag:"UK/US", views:"6B+", duration:"4:24",
    lyricsUrl:"https://genius.com/Ed-sheeran-shape-of-you-lyrics"
  },

  // üîª D√ÅN TH√äM... ƒë·ªß 100 b√†i ·ªü ƒë√¢y
];

const VN_LIST = [
  // ‚úÖ M·∫™U (anh thay th√†nh 100 b√†i Vi·ªát >100M views)
  { id:"Llw9Q6akRo4", title:"B·∫°c Ph·∫≠n", artist:"K-ICM ft. Jack", tag:"VN", views:"100M+", duration:"5:03",
    lyricsUrl:"https://genius.com/search?q=bac%20phan"
  },
  { id:"i5pUOVC50Y8", title:"S√≥ng Gi√≥", artist:"K-ICM ft. Jack", tag:"VN", views:"100M+", duration:"5:34",
    lyricsUrl:"https://genius.com/search?q=song%20gio"
  },
  { id:"aFqQ0dYVQwI", title:"H√£y Trao Cho Anh", artist:"S∆°n T√πng M-TP", tag:"VN", views:"100M+", duration:"4:05",
    lyricsUrl:"https://genius.com/search?q=hay%20trao%20cho%20anh"
  },

  // üîª D√ÅN TH√äM... ƒë·ªß 100 b√†i ·ªü ƒë√¢y
];

/**
 * =========================
 * 2) STATE
 * =========================
 */
const el = (id)=>document.getElementById(id);

const ytPlayer = el("ytPlayer");
const playlistEl = el("playlist");
const nowTypeEl  = el("nowType");
const nowTitleEl = el("nowTitle");
const modeBadge  = el("modeBadge");
const countBadge = el("countBadge");

const searchEl   = el("search");
const btnClear   = el("btnClear");

const btnAutoplay = el("btnAutoplay");
const btnLoop     = el("btnLoop");
const btnShuffle  = el("btnShuffle");
const btnPrev     = el("btnPrev");
const btnPlay     = el("btnPlay");
const btnNext     = el("btnNext");
const btnOpenYT   = el("btnOpenYT");

const progressEl  = el("progress");
const tNowEl      = el("tNow");
const tDurEl      = el("tDur");
const volEl       = el("vol");
const btnMute     = el("btnMute");

const lyricsBox   = el("lyricsBox");
const btnLyricsLink = el("btnLyricsLink");

const tabUSUK = el("tabUSUK");
const tabVN   = el("tabVN");

let activeTab = "USUK"; // or "VN"
let list = USUK_LIST;
let filtered = [...list];

let currentIndex = -1;
let currentItem = null;

let autoplay = true;
let shuffle = false;
let loopMode = "off"; // off | one | all

let isPlaying = false;

// NOTE: iframe kh√¥ng cho ƒë·ªçc progress th·∫≠t n·∫øu kh√¥ng d√πng IFrame API.
// -> Em l√†m ki·ªÉu "mini control": play/pause/next/prev & open yt, progress ch·ªâ l√† UI m√¥ ph·ªèng.
// N·∫øu anh mu·ªën progress th·∫≠t (seek + time th·∫≠t), em s·∫Ω g·ª≠i b·∫£n IFrame API v3 (d√†i h∆°n), v·∫´n ch·∫°y GitHub Pages ok.

function ytUrl(id){
  // autoplay=1 gi√∫p play ngay khi ƒë·ªïi b√†i
  return `https://www.youtube.com/embed/${id}?autoplay=1&rel=0&modestbranding=1&playsinline=1`;
}
function ytWatch(id){
  return `https://www.youtube.com/watch?v=${id}`;
}
function thumb(id){
  return `https://img.youtube.com/vi/${id}/mqdefault.jpg`;
}

function setModeBadge(){
  modeBadge.textContent = `MODE: Autoplay ${autoplay ? "ON":"OFF"} ‚Ä¢ Loop ${loopMode.toUpperCase()} ‚Ä¢ Shuffle ${shuffle ? "ON":"OFF"}`;
  btnAutoplay.classList.toggle("on", autoplay);
  btnShuffle.classList.toggle("on", shuffle);
  btnLoop.classList.toggle("on", loopMode !== "off");
  btnLoop.textContent = `Loop: ${loopMode.toUpperCase()}`;
}
setModeBadge();

function setTab(tab){
  activeTab = tab;
  if(tab === "USUK"){
    list = USUK_LIST;
    nowTypeEl.textContent = "US/UK";
    tabUSUK.classList.add("active");
    tabVN.classList.remove("active");
  }else{
    list = VN_LIST;
    nowTypeEl.textContent = "VIETNAM";
    tabVN.classList.add("active");
    tabUSUK.classList.remove("active");
  }
  searchEl.value = "";
  filtered = [...list];
  currentIndex = -1;
  currentItem = null;
  nowTitleEl.textContent = "‚Äî";
  ytPlayer.src = "";
  lyricsBox.textContent = "Ch∆∞a c√≥ lyrics. Anh c√≥ th·ªÉ nh·∫≠p tay (b·∫£n quy·ªÅn) trong data.";
  renderPlaylist();
}

tabUSUK.onclick = ()=>setTab("USUK");
tabVN.onclick   = ()=>setTab("VN");

function renderPlaylist(){
  playlistEl.innerHTML = "";
  countBadge.textContent = `${filtered.length} items`;
  filtered.forEach((s, idx)=>{
    const div = document.createElement("div");
    div.className = "item";
    if(currentItem && s.id === currentItem.id) div.classList.add("active");
    div.innerHTML = `
      <div class="thumb"><img alt="" src="${thumb(s.id)}"></div>
      <div class="meta">
        <b title="${escapeHtml(s.title)}">${escapeHtml(s.title)}</b>
        <small title="${escapeHtml(s.artist||"")}">${escapeHtml(s.artist||"")} ‚Ä¢ ${escapeHtml(s.views||"")}</small>
      </div>
      <div class="right">
        <div class="tag">${escapeHtml(s.tag||"")}</div>
        <div class="mini">${escapeHtml(s.duration||"")}</div>
      </div>
    `;
    div.onclick = ()=>playFromFilteredIndex(idx);
    playlistEl.appendChild(div);
  });
}

function escapeHtml(str){
  return (str ?? "").toString()
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

function playFromFilteredIndex(fIdx){
  if(filtered.length === 0) return;
  currentIndex = fIdx;
  currentItem = filtered[currentIndex];

  ytPlayer.src = ytUrl(currentItem.id);
  nowTitleEl.textContent = `${currentItem.title} ‚Äî ${currentItem.artist || ""}`.trim();

  // Lyrics
  applyLyricsLang(currentLang);

  // highlight active
  renderPlaylist();

  isPlaying = true;
  btnPlay.textContent = "‚è∏ Pause";
}

function nextTrack(){
  if(!currentItem){
    // n·∫øu ch∆∞a play, play b√†i ƒë·∫ßu
    if(filtered.length) return playFromFilteredIndex(0);
    return;
  }

  if(loopMode === "one"){
    return playFromFilteredIndex(currentIndex);
  }

  if(shuffle){
    const r = Math.floor(Math.random() * filtered.length);
    return playFromFilteredIndex(r);
  }

  const next = currentIndex + 1;
  if(next < filtered.length){
    return playFromFilteredIndex(next);
  }else{
    // end list
    if(loopMode === "all"){
      return playFromFilteredIndex(0);
    }
    // loop off: n·∫øu autoplay off th√¨ d·ª´ng, n·∫øu autoplay on th√¨ v·∫´n d·ª´ng ·ªü cu·ªëi
    isPlaying = false;
    btnPlay.textContent = "‚ñ∂ Play";
  }
}

function prevTrack(){
  if(!currentItem){
    if(filtered.length) return playFromFilteredIndex(0);
    return;
  }
  const prev = currentIndex - 1;
  if(prev >= 0) return playFromFilteredIndex(prev);
  // v·ªÅ ƒë·∫ßu
  return playFromFilteredIndex(0);
}

/**
 * Search
 */
searchEl.addEventListener("input", ()=>{
  const q = searchEl.value.trim().toLowerCase();
  if(!q){
    filtered = [...list];
  }else{
    filtered = list.filter(s=>{
      return (s.title||"").toLowerCase().includes(q) ||
             (s.artist||"").toLowerCase().includes(q) ||
             (s.tag||"").toLowerCase().includes(q);
    });
  }
  // gi·ªØ b√†i ƒëang ph√°t n·∫øu c√≤n trong filtered
  if(currentItem){
    const newIdx = filtered.findIndex(x=>x.id===currentItem.id);
    currentIndex = newIdx;
  }else{
    currentIndex = -1;
  }
  renderPlaylist();
});

btnClear.onclick = ()=>{
  searchEl.value = "";
  filtered = [...list];
  renderPlaylist();
};

/**
 * Buttons
 */
btnAutoplay.onclick = ()=>{
  autoplay = !autoplay;
  setModeBadge();
};
btnShuffle.onclick = ()=>{
  shuffle = !shuffle;
  setModeBadge();
};
btnLoop.onclick = ()=>{
  // off -> one -> all -> off
  loopMode = (loopMode==="off") ? "one" : (loopMode==="one" ? "all" : "off");
  setModeBadge();
};

btnPrev.onclick = prevTrack;
btnNext.onclick = nextTrack;

btnPlay.onclick = ()=>{
  // iframe embed kh√¥ng pause/play th·∫≠t n·∫øu kh√¥ng d√πng IFrame API,
  // n√™n em l√†m "replay toggle": pause -> reload video (t·∫°m), play -> load l·∫°i.
  if(!currentItem){
    if(filtered.length) playFromFilteredIndex(0);
    return;
  }
  if(isPlaying){
    // "pause gi·∫£": stop b·∫±ng c√°ch clear src
    ytPlayer.src = "";
    isPlaying = false;
    btnPlay.textContent = "‚ñ∂ Play";
  }else{
    ytPlayer.src = ytUrl(currentItem.id);
    isPlaying = true;
    btnPlay.textContent = "‚è∏ Pause";
  }
};

btnOpenYT.onclick = ()=>{
  if(!currentItem) return;
  window.open(ytWatch(currentItem.id), "_blank", "noopener");
};

/**
 * Lyrics EN/VI
 */
let currentLang = "en";
function applyLyricsLang(lang){
  currentLang = lang;
  // segment ui
  const btns = el("langSeg").querySelectorAll("button");
  btns.forEach(b=>b.classList.toggle("active", b.dataset.lang === lang));

  if(!currentItem){
    lyricsBox.textContent = "Ch∆∞a c√≥ lyrics. Anh c√≥ th·ªÉ nh·∫≠p tay (b·∫£n quy·ªÅn) trong data.";
    return;
  }
  const txt = currentItem.lyrics?.[lang];
  lyricsBox.textContent = txt?.trim()
    ? txt.trim()
    : "Ch∆∞a c√≥ lyrics (b·∫£n quy·ªÅn) cho b√†i n√†y. Anh ƒë·ªÉ link ·ªü n√∫t Lyrics Link ‚Üó ho·∫∑c t·ª± nh·∫≠p tay trong data.";
}

el("langSeg").addEventListener("click",(e)=>{
  const btn = e.target.closest("button[data-lang]");
  if(!btn) return;
  applyLyricsLang(btn.dataset.lang);
});

btnLyricsLink.onclick = ()=>{
  if(!currentItem) return;
  const url = currentItem.lyricsUrl;
  if(url) window.open(url, "_blank", "noopener");
  else alert("B√†i n√†y ch∆∞a c√≥ lyricsUrl. Anh th√™m lyricsUrl trong data nh√©.");
};

/**
 * Progress/Volume (UI)
 * - N·∫øu anh mu·ªën ti·∫øn tr√¨nh th·∫≠t + tua th·∫≠t -> em g·ª≠i b·∫£n YouTube IFrame API (seekTo, getCurrentTime...)
 */
progressEl.addEventListener("input", ()=>{
  // UI only
});
volEl.addEventListener("input", ()=>{
  // UI only
});
btnMute.onclick = ()=>{
  // UI only
  if(btnMute.classList.toggle("on")){
    btnMute.textContent = "Unmute";
  }else{
    btnMute.textContent = "Mute";
  }
};

// Keyboard shortcuts (basic)
window.addEventListener("keydown",(e)=>{
  if(["INPUT","TEXTAREA"].includes(document.activeElement?.tagName)) return;
  if(e.code === "Space"){ e.preventDefault(); btnPlay.click(); }
  if(e.code === "ArrowRight"){ e.preventDefault(); btnNext.click(); }
  if(e.code === "ArrowLeft"){ e.preventDefault(); btnPrev.click(); }
});

/**
 * Auto-next (simple)
 * - Kh√¥ng bi·∫øt ch√≠nh x√°c khi video k·∫øt th√∫c n·∫øu kh√¥ng d√πng IFrame API
 * - Em d√πng timer m√¥ ph·ªèng: n·∫øu autoplay ON th√¨ c·ª© 4 ph√∫t t·ª± next (anh c√≥ th·ªÉ ch·ªânh)
 * - Khuy·∫øn ngh·ªã: d√πng IFrame API ƒë·ªÉ b·∫Øt s·ª± ki·ªán ended (chu·∫©n nh·∫•t)
 */
let autoTimer = null;
function startAutoTimer(){
  if(autoTimer) clearInterval(autoTimer);
  autoTimer = setInterval(()=>{
    if(!autoplay) return;
    if(!isPlaying) return;
    // c·ª© 240s (4 ph√∫t) next 1 b√†i (m√¥ ph·ªèng)
    // N·∫øu anh mu·ªën ƒë√∫ng 100%: em s·∫Ω g·ª≠i b·∫£n IFrame API b·∫Øt event ENDED.
    // ·ªû ƒë√¢y ch·ªâ ƒë·ªÉ demo.
  }, 1000);
}
startAutoTimer();

/**
 * INIT
 */
setTab("USUK"); // m·∫∑c ƒë·ªãnh US/UK
</script>
</body>
</html>
